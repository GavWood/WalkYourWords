<!DOCTYPE html>
<html lang="en">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<meta http-equiv="refresh" content="time; URL=https://walkyourwords.com/test" />
<meta http-equiv="content-type" content="text/html;charset=utf-8" />

<head>
<link rel="stylesheet" href="/style.css">
</head>

<body>

<style>
body {
  overflow: hidden; /* Hide scrollbars */
}
</style>

<div class="mycontainer">
	<div class="mydiv">
	
		<h1>WanderStok</h1>
	
		<br>
		<br>
		Εισάγετε τον κωδικό
		<br>
		Το παρόν θα αποθηκεύσει το όνομα χρήστη
		<br>
		<br>
		<form  enctype="multipart/form-data" action="/settings/uploadFile"  method="post" class="dropzone" id="myform">
		<input id="password" type="text" name="password" placeholder="κωδικό">
		</form>
		
		<div class="postButton">
			<button class="button" onclick="postPassword()">Είσαγετε κωδικό</button>				
		</div>
		
		<p id="wrongpass"></p>
	</div>
</div>

<script>

	async function postAsync()
	{
		var formData = new FormData( document.getElementById("myform") );
		
		let response = await fetch('/password', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify({
				wanderData: {
					password: formData.get("password"),
				}
			})
		});
		
		if (!response.ok) {		
			document.getElementById('myform').reset();
			wrongpass.innerHTML = "Λάθος κωδικός";
		}
		else
		{
			location.reload();
		}
	}
	
	function postPassword ()
	{
		postAsync();
	}
	
	getLocation();

</script>

</body>
</html>
